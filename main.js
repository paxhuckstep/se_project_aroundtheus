!function(){"use strict";class e{constructor(e,t,s,r,n){this._name=e.name,this._link=e.link,this._ID=e._id,this._isLiked=e.isLiked,this._cardSelector=t,this._handleImageClick=s,this._handleLikeClick=r,this._handleTrashClick=n}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>{this._handleLikeClick(this),console.log(this)})),this._cardTrashButton.addEventListener("click",(()=>{this._handleTrashClick(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}cardDeletionConfirmed(){console.log("card delete clicked"),this._cardElement.remove(),this._cardElement=null}handleLikeIcon(){this._cardLikeButton.classList.toggle("card__like-button_active")}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardTrashButton=this._cardElement.querySelector(".card__trash-button"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._checkLikeView(),this._setEventListeners(),this._cardElement}_checkLikeView(){this._isLiked?this._cardLikeButton.classList.add("card__like-button_active"):this._cardLikeButton.classList.remove("card__like-button_active")}getId(){return this._ID}getLikeStatus(){return this._isLiked}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_removeInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._removeInputError(e)}))}disableButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return!this._inputList.every((e=>e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._removeInputError(e):this._showInputError(e)}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}openPopup(){console.log(this._popupElement),this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}closePopup(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown,",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.closePopup()};setEventListeners(){console.log(this._popupElement),this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&this.closePopup()}))}}class r extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._saveButton=this._popupForm.querySelector(".modal__save")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setButtonTextSave(){this._saveButton.textContent="Save"}resetForm(){this._popupForm.reset()}setEventListeners(){this._popupForm.addEventListener("submit",(()=>{this._saveButton.textContent="Saving...",this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}const n=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}handleServerResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this.handleServerResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{headers:this._headers,method:"PUT"}).then(this.handleServerResponse)}unLikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{headers:this._headers,method:"DELETE"}).then(this.handleServerResponse)}createNewCard(e){return fetch(`${this._baseUrl}/cards`,{headers:this._headers,method:"POST",body:JSON.stringify({name:e.title,link:e.url})}).then(this.handleServerResponse)}deleteSelectedCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{headers:this._headers,method:"DELETE"}).then(this.handleServerResponse)}getCurrentUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this.handleServerResponse)}updateProfileInfo(e){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e.name,about:e.description})}).then(this.handleServerResponse)}updateProfileAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then(this.handleServerResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"3842a5e9-1960-4db2-bd37-d3db8df7459f","Content-Type":"application/json"}}),o=document.querySelector("#edit-modal"),i=document.querySelector(".profile__add-button"),a=document.querySelector(".profile__edit-button"),l=document.querySelector("#profile-title-input"),c=document.querySelector("#profile-description-input"),d=o.querySelector("#profile-edit-form"),h=document.querySelector("#add-card-form"),u=document.querySelector(".profile__avatar-button"),_=document.querySelector("#avatar-photo-form"),p={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__save_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};function m(t){const s=function(t){return new e(t,"#card-template",v,E,S).getView()}(t);f.addItem(s)}function v(e){B.openPopup(e)}function E(e){const t=e.getId();e.getLikeStatus()?n.unLikeCard(t).then((()=>{e.handleLikeIcon()})).catch((e=>{console.log(e)})):n.likeCard(t).then((()=>{e.handleLikeIcon()})).catch((e=>{console.log(e)}))}function S(e){console.log(e);const t=e.getId();q.openPopup(),q.setSubmitAction((()=>{n.deleteSelectedCard(t).then((()=>{e.cardDeletionConfirmed(),q.closePopup()})).catch((e=>{console.log(e)})).finally((()=>{q.setButtonTextYes()}))}))}a.addEventListener("click",(()=>{b.resetValidation();const e=L.getUserInfo();C.openPopup(),l.value=e.name,c.value=e.job})),i.addEventListener("click",(()=>{y.openPopup()})),u.addEventListener("click",(()=>{k.resetValidation(),I.openPopup()}));const L=new class{constructor(e){let{userName:t,userJob:s,userAvatar:r}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s),this._avatarElement=document.querySelector(r)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){this._nameElement.textContent=e.name,this._jobElement.textContent=e.job}setAvatarUrl(e){this._avatarElement.src=e}}({userName:".profile__title",userJob:".profile__description",userAvatar:".profile__image"}),f=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this.cardListEl=document.querySelector(t)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}addItem(e){this.cardListEl.prepend(e)}}({renderer:m},".cards__list"),b=new t(p,d);b.enableValidation();const g=new t(p,h);g.enableValidation();const k=new t(p,_);k.enableValidation();const y=new r("#card-add-modal",(function(e){n.createNewCard(e).then((e=>{m(e),g.disableButton(),y.resetForm(),y.closePopup()})).catch((e=>{console.log(e)})).finally((()=>{y.setButtonTextSave()}))}));y.setEventListeners();const C=new r("#edit-modal",(function(e){n.updateProfileInfo(e).then((e=>{L.setUserInfo({name:e.name,job:e.about}),C.resetForm(),C.closePopup()})).catch((e=>console.log(e))).finally((()=>{C.setButtonTextSave()}))}));C.setEventListeners();const I=new r("#change-avatar-modal",(function(e){n.updateProfileAvatar(e.url).then((e=>{L.setAvatarUrl(e.avatar),I.resetForm(),I.closePopup()})).catch((e=>{console.log(e)})).finally((()=>{I.setButtonTextSave()}))}));I.setEventListeners();const B=new class extends s{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector("#picture-modal-image"),this._title=this._popupElement.querySelector("#picture-modal-heading")}openPopup(e){let{name:t,link:s}=e;this._image.src=s,this._image.alt=t,this._title.textContent=t,super.openPopup()}}("#picture-modal");B.setEventListeners();const q=new class extends s{constructor(e){super({popupSelector:e}),this._yesDeleteButton=document.querySelector("#delete-card-button"),this._saveButton=this._popupElement.querySelector(".modal__save")}setSubmitAction(e){this._handleSubmit=e}setButtonTextYes(){this._saveButton.textContent="Yes"}setEventListeners(){this._yesDeleteButton.addEventListener("click",(()=>{this._saveButton.textContent="Deleting...",this._handleSubmit()})),super.setEventListeners()}}("#delete-card-modal");q.setEventListeners(),n.getInitialCards().then((e=>{f.renderItems(e)})).catch((e=>{console.error(e)})),n.getCurrentUserInfo().then((e=>{L.setUserInfo({name:e.name,job:e.about}),L.setAvatarUrl(e.avatar)})).catch((e=>console.log(e)))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoY2FyZERhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaywgaGFuZGxlTGlrZUNsaWNrLCBoYW5kbGVUcmFzaENsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5fSUQgPSBjYXJkRGF0YS5faWQ7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gY2FyZERhdGEuaXNMaWtlZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlVHJhc2hDbGljayA9IGhhbmRsZVRyYXNoQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkVHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlVHJhc2hDbGljayh0aGlzKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjYXJkRGVsZXRpb25Db25maXJtZWQoKSB7IC8vIF9oYW5kbGV0cmFzaEJ1dHRvblxyXG4gICAgY29uc29sZS5sb2coXCJjYXJkIGRlbGV0ZSBjbGlja2VkXCIpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9jYXJkVHJhc2hCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkX190cmFzaC1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX2NoZWNrTGlrZVZpZXcoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG4gIF9jaGVja0xpa2VWaWV3KCkge1xyXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX0lEO1xyXG4gIH1cclxuICBnZXRMaWtlU3RhdHVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzTGlrZWQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjXCIgKyBpbnB1dEVsLmlkICsgXCItZXJyb3JcIlxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNcIiArIGlucHV0RWwuaWQgKyBcIi1lcnJvclwiXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5fcmVtb3ZlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0TGlzdC5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3JlbW92ZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlblBvcHVwKCkge1xyXG4gICAgLy8gb3BlbiBwb3B1cCAod2hhdHMgYSBtb2RhbCB2cyBwb3B1cD8pXHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9wb3B1cEVsZW1lbnQpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZVBvcHVwKCkge1xyXG4gICAgLy9jbG9zZXMgcG9wdXBcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd24sXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChlKSA9PiB7XHJcbiAgICAvL2xpc3RlbnMgdG8gZXNjIGJ1dHRvblxyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc29sZS5sb2codGhpcy5fcG9wdXBFbGVtZW50KTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpIHx8XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcclxuICAgdGhpcy5fc2F2ZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuLy8gIG9wZW5Qb3B1cCgpIHtcclxuLy8gICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbi8vICAgc3VwZXIub3BlblBvcHVwKCk7XHJcbi8vICB9XHJcblxyXG4gc2V0QnV0dG9uVGV4dFNhdmUgKCkge1xyXG4gIHRoaXMuX3NhdmVCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuIH1cclxuXHJcbiByZXNldEZvcm0oKSB7XHJcbiAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xyXG4gICAgIFxyXG4gICAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgLy90aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgICAgLy90aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgICAgXHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgLy8gY29uc3RydWN0b3IgYm9keVxyXG4gICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICAvLyBDIENyZWF0ZSBSIFJlYWQgVSBVcGRhdGUgRCBEZWxldGVcclxuICAvLyBQT1NULCBHRVQqLCB7IFBBVENILCBQVVQgfSwgREVMRVRFXHJcblxyXG4gIC8vIGNyZWF0ZSBmdW5jdGlvbiB0byBoYW5kbGUgc2VydmVyIHJlc3BvbnNlXHJcblxyXG4gIGhhbmRsZVNlcnZlclJlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIC8vIGlmIHRoZSBzZXJ2ZXIgcmV0dXJucyBhbiBlcnJvciwgcmVqZWN0IHRoZSBwcm9taXNlXHJcbiAgICBlbHNlIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIC8vVGhpcyByZXBsYWNlcyBjb25zdCBcImluaXRpYWxDYXJkc1wiIHJpZ2h0PyAobGluZSAyMyBpbiBjb25zdGFudHMuanMpXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLmhhbmRsZVNlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGNhcmRJRCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElEfS9saWtlc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgfSkudGhlbih0aGlzLmhhbmRsZVNlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHVuTGlrZUNhcmQoY2FyZElEKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSUR9L2xpa2VzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICB9KS50aGVuKHRoaXMuaGFuZGxlU2VydmVyUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlTmV3Q2FyZChjYXJkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBjYXJkLnRpdGxlLFxyXG4gICAgICAgIGxpbms6IGNhcmQudXJsLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVTZWxlY3RlZENhcmQoY2FyZElEKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSUR9YCwvKndoZXJlIGRvIHdlIGdldCBjYXJkSWQqLyAge1xyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgfSkudGhlbih0aGlzLmhhbmRsZVNlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIC8vICAgLy8gb3RoZXIgbWV0aG9kcyBmb3Igd29ya2luZyB3aXRoIHRoZSBBUElcclxuXHJcbiAgZ2V0Q3VycmVudFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLmhhbmRsZVNlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcbiAgXHJcblxyXG4gIHVwZGF0ZVByb2ZpbGVJbmZvKG5ld1VzZXJJbmZvKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmV3VXNlckluZm8ubmFtZSxcclxuICAgICAgICBhYm91dDogbmV3VXNlckluZm8uZGVzY3JpcHRpb24sXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLmhhbmRsZVNlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gICAgdXBkYXRlUHJvZmlsZUF2YXRhcihhdmF0YXJJbmZvKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIGF2YXRhcjogYXZhdGFySW5mb1xyXG4gICAgICAgICAgfSlcclxuICAgICAgfSkudGhlbih0aGlzLmhhbmRsZVNlcnZlclJlc3BvbnNlKTtcclxuICAgIH1cclxufVxyXG5cclxuLy9kb2VzIHRoaXMgZ28gdG8gY29uc3RhbnRzLmpzPz8/Pz9cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjM4NDJhNWU5LTE5NjAtNGRiMi1iZDM3LWQzZGI4ZGY3NDU5ZlwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcbiIsImV4cG9ydCBjb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPVxyXG4gIHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyUGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJQaG90b0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhci1waG90by1mb3JtXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmVcIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5cclxuaW1wb3J0IHtcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcclxuICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICBwcm9maWxlVGl0bGVJbnB1dCxcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcclxuICBhZGRDYXJkRm9ybSxcclxuICBzZXR0aW5ncyxcclxuICBhdmF0YXJQaG90byxcclxuICBhdmF0YXJQaG90b0Zvcm0sXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcclxuXHJcblxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICBjYXJkRGF0YSxcclxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUltYWdlQnV0dG9uLFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrLFxyXG4gICAgaGFuZGxlVHJhc2hCdXR0b25cclxuICApO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudC5nZXRWaWV3KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUJ1dHRvbihjYXJkRGF0YSkge1xyXG4gIGltYWdlUG9wdXAub3BlblBvcHVwKGNhcmREYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGNhcmQpIHtcclxuICBjb25zdCBjYXJkSWQgPSBjYXJkLmdldElkKCk7XHJcbiAgY29uc3QgaXNMaWtlZCA9IGNhcmQuZ2V0TGlrZVN0YXR1cygpO1xyXG4gIGlmIChpc0xpa2VkKSB7XHJcbiAgICBhcGlcclxuICAgICAgLnVuTGlrZUNhcmQoY2FyZElkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZC5oYW5kbGVMaWtlSWNvbigpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgYXBpXHJcbiAgICAgIC5saWtlQ2FyZChjYXJkSWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkLmhhbmRsZUxpa2VJY29uKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlVHJhc2hCdXR0b24oY2FyZCkge1xyXG4gIGNvbnNvbGUubG9nKGNhcmQpO1xyXG4gIGNvbnN0IGNhcmRJZCA9IGNhcmQuZ2V0SWQoKTtcclxuICBjYXJkRGVsZXRlUG9wdXAub3BlblBvcHVwKCk7XHJcbiAgY2FyZERlbGV0ZVBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZVNlbGVjdGVkQ2FyZChjYXJkSWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkLmNhcmREZWxldGlvbkNvbmZpcm1lZCgpO1xyXG4gICAgICAgIGNhcmREZWxldGVQb3B1cC5jbG9zZVBvcHVwKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBjYXJkRGVsZXRlUG9wdXAuc2V0QnV0dG9uVGV4dFllcygpO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3VibWl0UHJvZmlsZUZvcm0odXNlckRhdGFJbnB1dCkge1xyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZVByb2ZpbGVJbmZvKHVzZXJEYXRhSW5wdXQpXHJcbiAgICAudGhlbigodXNlckRhdGEpID0+IHtcclxuICAgICAgdXNlckluZm9NYWluLnNldFVzZXJJbmZvKHtcclxuICAgICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxyXG4gICAgICAgIGpvYjogdXNlckRhdGEuYWJvdXQsXHJcbiAgICAgIH0pO1xyXG4gICAgICBlZGl0UHJvZmlsZVBvcHVwLnJlc2V0Rm9ybSgpO1xyXG4gICAgICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlUG9wdXAoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhlcnJvcikpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGVkaXRQcm9maWxlUG9wdXAuc2V0QnV0dG9uVGV4dFNhdmUoKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHN1Ym1pdEF2YXRhckxpbmsodXJsSW5wdXQpIHtcclxuICBhcGlcclxuICAgIC51cGRhdGVQcm9maWxlQXZhdGFyKHVybElucHV0LnVybClcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvTWFpbi5zZXRBdmF0YXJVcmwoZGF0YS5hdmF0YXIpO1xyXG4gICAgICBjaGFuZ2VBdmF0YXJQb3B1cC5yZXNldEZvcm0oKTtcclxuICAgICAgY2hhbmdlQXZhdGFyUG9wdXAuY2xvc2VQb3B1cCgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgY2hhbmdlQXZhdGFyUG9wdXAuc2V0QnV0dG9uVGV4dFNhdmUoKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHN1Ym1pdENhcmRBZGQoaW5wdXRWYWx1ZXMpIHtcclxuICBhcGlcclxuICAgIC5jcmVhdGVOZXdDYXJkKGlucHV0VmFsdWVzKVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgcmVuZGVyQ2FyZChkYXRhKTtcclxuICAgICAgYWRkRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICAgIG5ld0NhcmRQb3B1cC5yZXNldEZvcm0oKTtcclxuICAgICAgbmV3Q2FyZFBvcHVwLmNsb3NlUG9wdXAoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIG5ld0NhcmRQb3B1cC5zZXRCdXR0b25UZXh0U2F2ZSgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgY29uc3QgdXNlckRldGFpbHMgPSB1c2VySW5mb01haW4uZ2V0VXNlckluZm8oKTtcclxuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW5Qb3B1cCgpO1xyXG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gdXNlckRldGFpbHMubmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJEZXRhaWxzLmpvYjtcclxufSk7XHJcblxyXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgbmV3Q2FyZFBvcHVwLm9wZW5Qb3B1cCgpO1xyXG59KTtcclxuXHJcbmF2YXRhclBob3RvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY2hhbmdlQXZhdGFyUG9wdXBWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgY2hhbmdlQXZhdGFyUG9wdXAub3BlblBvcHVwKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgdXNlckluZm9NYWluID0gbmV3IFVzZXJJbmZvKHtcclxuICB1c2VyTmFtZTogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICB1c2VySm9iOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG4gIHVzZXJBdmF0YXI6IFwiLnByb2ZpbGVfX2ltYWdlXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbih7IHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sIFwiLmNhcmRzX19saXN0XCIpO1xyXG5cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcHJvZmlsZUVkaXRGb3JtKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhZGRDYXJkRm9ybSk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgY2hhbmdlQXZhdGFyUG9wdXBWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgYXZhdGFyUGhvdG9Gb3JtKTtcclxuY2hhbmdlQXZhdGFyUG9wdXBWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjY2FyZC1hZGQtbW9kYWxcIiwgc3VibWl0Q2FyZEFkZCk7XHJcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2VkaXQtbW9kYWxcIiwgc3VibWl0UHJvZmlsZUZvcm0pO1xyXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBjaGFuZ2VBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI2NoYW5nZS1hdmF0YXItbW9kYWxcIixcclxuICBzdWJtaXRBdmF0YXJMaW5rXHJcbik7XHJcbmNoYW5nZUF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BpY3R1cmUtbW9kYWxcIik7XHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGNhcmREZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXCIjZGVsZXRlLWNhcmQtbW9kYWxcIik7XHJcbmNhcmREZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMocmVzdWx0KTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgfSk7XHJcblxyXG5hcGlcclxuICAuZ2V0Q3VycmVudFVzZXJJbmZvKClcclxuICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICB1c2VySW5mb01haW4uc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiByZXN1bHQubmFtZSxcclxuICAgICAgam9iOiByZXN1bHQuYWJvdXQsXHJcbiAgICB9KTtcclxuICAgIHVzZXJJbmZvTWFpbi5zZXRBdmF0YXJVcmwocmVzdWx0LmF2YXRhcik7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhlcnJvcikpO1xyXG5cclxuLy8gZ2l0aHViIHBhZ2VzIGxpbms6IGh0dHBzOi8vcGF4aHVja3N0ZXAuZ2l0aHViLmlvL3NlX3Byb2plY3RfYXJvdW5kdGhldXNcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgdXNlck5hbWUsIHVzZXJKb2IsIHVzZXJBdmF0YXIgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lKTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJKb2IpO1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHVzZXJJbmZvID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICAgIC8vIGdldHRpbmcgdGhlIHVzZXIgaW5mb1xyXG4gICAgcmV0dXJuIHVzZXJJbmZvO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8odXNlcklucHV0KSB7XHJcbiAgICAvLyBzZXRzIHVzZXJJbmZvIGF0IGVuZCBvZiBzdWJtaXRQcm9maWxlRWRpdCAoKVxyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VySW5wdXQubmFtZTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VySW5wdXQuam9iO1xyXG4gIH1cclxuXHJcbi8vICAgZ2V0QXZhdGFySW5mbygpIHtcclxuLy8gICBjb25zdCBhdmF0YXJJbmZvID17XHJcbi8vICAgICB1cmw6IHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjLFxyXG4vLyAgIH07XHJcbi8vICAgcmV0dXJuIGF2YXRhckluZm87XHJcbi8vIH1cclxuXHJcbiAgc2V0QXZhdGFyVXJsKGF2YXRhcklucHV0KXtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFySW5wdXQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY3NzU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLmNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNzc1NlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuY2FyZExpc3RFbC5wcmVwZW5kKGl0ZW0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGljdHVyZS1tb2RhbC1pbWFnZVwiKTtcclxuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGljdHVyZS1tb2RhbC1oZWFkaW5nXCIpO1xyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5faW1hZ2UsIHRoaXMuX3RpdGxlLCB0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICB9XHJcbiAgb3BlblBvcHVwKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICAvL29wZW5pbmcgd2l0aCBuYW1lIGFuZCBsaW5rIG9mIGltYWdlXHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHN1cGVyLm9wZW5Qb3B1cCgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl95ZXNEZWxldGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1jYXJkLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX3NhdmVCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZVwiKTtcclxuICB9XHJcblxyXG5zZXRTdWJtaXRBY3Rpb24oYWN0aW9uKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBhY3Rpb247XHJcbn1cclxuLy8gb3BlblBvcHVwKCkge1xyXG4vLyAgICAgdGhpcy5fc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiWWVzXCI7XHJcbi8vICAgICBzdXBlci5vcGVuUG9wdXAoKTtcclxuLy8gICAgfVxyXG5zZXRCdXR0b25UZXh0WWVzKCkge1xyXG4gICAgdGhpcy5fc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiWWVzXCI7XHJcbn1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl95ZXNEZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gXCJEZWxldGluZy4uLlwiO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImNhcmREYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZVRyYXNoQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX0lEIiwiX2lkIiwiX2lzTGlrZWQiLCJpc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVUcmFzaENsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRMaWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnNvbGUiLCJsb2ciLCJfY2FyZFRyYXNoQnV0dG9uIiwiX2NhcmRJbWFnZSIsImNhcmREZWxldGlvbkNvbmZpcm1lZCIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsImhhbmRsZUxpa2VJY29uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZ2V0VmlldyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfY2hlY2tMaWtlVmlldyIsImFkZCIsImdldElkIiwiZ2V0TGlrZVN0YXR1cyIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX3JlbW92ZUlucHV0RXJyb3IiLCJyZXNldFZhbGlkYXRpb24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5wdXRMaXN0IiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsImRpc2FibGVCdXR0b24iLCJfYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwiX2hhc0ludmFsaWRJbnB1dCIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50Iiwib3BlblBvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2VQb3B1cCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9zYXZlQnV0dG9uIiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJzZXRCdXR0b25UZXh0U2F2ZSIsInJlc2V0Rm9ybSIsInJlc2V0IiwiYXBpIiwib3B0aW9ucyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsImhhbmRsZVNlcnZlclJlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsImxpa2VDYXJkIiwiY2FyZElEIiwibWV0aG9kIiwidW5MaWtlQ2FyZCIsImNyZWF0ZU5ld0NhcmQiLCJjYXJkIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0aXRsZSIsInVybCIsImRlbGV0ZVNlbGVjdGVkQ2FyZCIsImdldEN1cnJlbnRVc2VySW5mbyIsInVwZGF0ZVByb2ZpbGVJbmZvIiwibmV3VXNlckluZm8iLCJhYm91dCIsImRlc2NyaXB0aW9uIiwidXBkYXRlUHJvZmlsZUF2YXRhciIsImF2YXRhckluZm8iLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwicHJvZmlsZUVkaXRNb2RhbCIsImFkZE5ld0NhcmRCdXR0b24iLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlRWRpdEZvcm0iLCJhZGRDYXJkRm9ybSIsImF2YXRhclBob3RvIiwiYXZhdGFyUGhvdG9Gb3JtIiwiZm9ybVNlbGVjdG9yIiwicmVuZGVyQ2FyZCIsImNhcmRFbGVtZW50IiwiaGFuZGxlSW1hZ2VCdXR0b24iLCJoYW5kbGVUcmFzaEJ1dHRvbiIsImNyZWF0ZUNhcmQiLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJpbWFnZVBvcHVwIiwiY2FyZElkIiwiY2F0Y2giLCJlcnJvciIsImNhcmREZWxldGVQb3B1cCIsInNldFN1Ym1pdEFjdGlvbiIsImZpbmFsbHkiLCJzZXRCdXR0b25UZXh0WWVzIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJ1c2VyRGV0YWlscyIsInVzZXJJbmZvTWFpbiIsImdldFVzZXJJbmZvIiwiZWRpdFByb2ZpbGVQb3B1cCIsImpvYiIsIm5ld0NhcmRQb3B1cCIsImNoYW5nZUF2YXRhclBvcHVwVmFsaWRhdG9yIiwiY2hhbmdlQXZhdGFyUG9wdXAiLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJ1c2VyQXZhdGFyIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsInNldFVzZXJJbmZvIiwidXNlcklucHV0Iiwic2V0QXZhdGFyVXJsIiwiYXZhdGFySW5wdXQiLCJjc3NTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiY2FyZExpc3RFbCIsInJlbmRlckl0ZW1zIiwiaXRlbXMiLCJpdGVtIiwicHJlcGVuZCIsImFkZEZvcm1WYWxpZGF0b3IiLCJpbnB1dFZhbHVlcyIsImRhdGEiLCJ1c2VyRGF0YUlucHV0IiwidXNlckRhdGEiLCJ1cmxJbnB1dCIsIl9pbWFnZSIsIl90aXRsZSIsIl95ZXNEZWxldGVCdXR0b24iLCJhY3Rpb24iLCJfaGFuZGxlU3VibWl0IiwicmVzdWx0IiwiZXJyIl0sInNvdXJjZVJvb3QiOiIifQ==